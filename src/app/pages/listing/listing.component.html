
<div class="flex flex-column w-full justify-content-start align-items-center gap-8">
    <div class="w-full px-8">
        <img style="width: 100%; height: 800px; object-fit: cover;" class="border-round-3xl" src="{{listing.image}}" alt="">
    </div>
    <div style="max-width: 1400px;">
        <div class="flex flex-column align-items-center text-center">
            <h2>{{listing.title | titlecase}}</h2>
            <p class="font-light text-2xl">{{listing.descrption}}</p>
        </div>
    
        <h3 class="text-7xl">Itinerary</h3>
        <p class="text-2xl">{{listing.itenerary.caption}}</p>

        <div class="flex flex-column">
            <h3 class="text-7xl">Overview</h3>
            <p-table [value]="listing.itenerary.days" [tableStyle]="{ 'min-width': '50rem' }">
                <ng-template pTemplate="header">
                    <tr>
                        <th>Cities</th>
                        <th>Cities</th>
                        <th>Cities</th>
                        <th>Cities</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-day>
                    <tr>
                        <td>{{ day.cities[0] }}</td>
                        <td>test</td>
                        <td>testing, testing</td>
                        <td>Day</td>
                    </tr>
                </ng-template>
            </p-table>

            <div class="flex">
                @for (accomodation of listing.accomodations; track $index) {
                    <div class="flex flex-column align-items-center cursor-pointer" (click)="handleLink(accomodation.link)">
                        <img style="width: 200px; height: 100px;" class="border-round-3xl" src="{{accomodation.photo}}" alt="">
                        <p>Hotel Name</p>
                        @if(accomodation.rating){
                            <p-rating [(ngModel)]="accomodation.rating" stars="5"/>
                        }
                    </div>
                }
            </div>
        </div>

        <p-accordion [multiple]="true" [activeIndex]="[0]" expandIcon="fa-solid fa-circle-dot" collapseIcon="fa-solid fa-circle">
            @for (day of listing.itenerary.days; track $index) {
            <p-accordionTab header="Day: {{day.cities[0]}} - {{day.cities[1]}}">
                <div class="pl-4">
                    @if(day.photos) {
                        <img style="width: 900px; height: 400px;" class="border-round-3xl" src="{{day.photos[0]}}" alt="">
                    }
                    <p class="text-xl">{{day.overview}}</p>
                    <div class="flex flex-column align-items-start justify-content-start">
                        @if(day.accomodations) {
                            <h2 class="ml-3">Accomodations</h2>
                            @for (accomodation of day.accomodations; track $index) {
                                <div class="flex flex-column align-items-center cursor-pointer" (click)="handleLink(accomodation.link)">
                                    <img style="width: 200px; height: 100px;" class="border-round-3xl" src="{{accomodation.photo}}" alt="">
                                    <p>Hotel Name</p>
                                    @if(accomodation.rating){
                                        <p-rating [(ngModel)]="accomodation.rating" stars="5"/>
                                    }
                                </div>
                            }
                        }
                    </div>
                    <div class="flex flex-column align-items-start justify-content-start">
                        @if(day.activities) {
                            <h2 class="ml-3">Activities</h2>
                            @for (activity of day.accomodations; track $index) {
                                <div class="flex flex-column align-items-center cursor-pointer" (click)="handleLink(activity.link)">
                                    <img style="width: 200px; height: 100px;" class="border-round-3xl" src="{{activity.photo}}" alt="">
                                    <p>Activity Name</p>
                                    @if(activity.rating){
                                        <p-rating [(ngModel)]="activity.rating" stars="5"/>
                                    }
                                </div>
                            }
                        }
                    </div>
                    <div class="flex flex-column align-items-start justify-content-start">
                        @if(day.restaurants) {
                            <h2 class="ml-3">Restaurants</h2>
                            @for (restaurant of day.accomodations; track $index) {
                                <div class="flex flex-column align-items-center cursor-pointer" (click)="handleLink(restaurant.link)">
                                    <img style="width: 200px; height: 100px;" class="border-round-3xl" src="{{restaurant.photo}}" alt="">
                                    <p>Restaurant Name</p>
                                    @if(restaurant.rating){
                                        <p-rating [(ngModel)]="restaurant.rating" stars="5"/>
                                    }
                                </div>
                            }
                        }
                    </div>
                </div>
            </p-accordionTab>
            }
        </p-accordion>

    </div>
</div>
